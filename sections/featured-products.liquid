{% comment %}
  Featured Products section for Bike Yard Shopify theme
{% endcomment %}

<section class="featured-products py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-16 animate-fade-in">
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
        Our
        <span class="text-gradient-primary">Products</span>
      </h2>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        Discover our premium selection of bikes, accessories, and gear for every type of cyclist
      </p>
    </div>

    <!-- Product Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% assign collection = collections[section.settings.collection] %}
      {% assign product_limit = section.settings.product_limit | default: 6 %}
      {% for product in collection.products limit: product_limit %}
        <div class="card group animate-slide-up">
          <!-- Product Image -->
          <div class="relative overflow-hidden rounded-t-xl">
            <img
              src="{{ product.featured_image | image_url: width: 500, height: 300 }}"
              alt="{{ product.title | escape }}"
              class="w-full h-64 object-cover group-hover:scale-110 transition-transform duration-500"
              loading="lazy"
            >
            
            <!-- Badges -->
            <div class="absolute top-4 left-4 flex flex-col gap-2">
              {% if product.tags contains 'new' %}
                <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                  New
                </span>
              {% endif %}
              {% if product.compare_at_price > product.price %}
                <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                  Sale
                </span>
              {% endif %}
            </div>

            <!-- Quick Actions -->
            <div class="absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <button class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow duration-300">
                <svg class="h-5 w-5 text-gray-600 hover:text-red-500 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
              <button class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow duration-300">
                <svg class="h-5 w-5 text-gray-600 hover:text-primary-600 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- Product Info -->
          <div class="p-6">
            <div class="mb-2">
              <span class="text-sm text-primary-600 font-medium">
                {{ product.type | default: 'Product' }}
              </span>
            </div>
            
            <h3 class="text-xl font-semibold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors duration-300">
              {{ product.title }}
            </h3>

            <!-- Rating -->
            <div class="flex items-center mb-3">
              <div class="flex items-center">
                {% assign rating = 4.5 %}
                {% for i in (1..5) %}
                  <svg class="h-4 w-4 {% if i <= rating %}text-yellow-400 fill-current{% else %}text-gray-300{% endif %}" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                  </svg>
                {% endfor %}
              </div>
              <span class="text-sm text-gray-600 ml-2">
                ({{ product.reviews_count | default: 50 }} reviews)
              </span>
            </div>

            <!-- Price -->
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center gap-2">
                <span class="text-2xl font-bold text-gray-900">
                  {{ product.price | money }}
                </span>
                {% if product.compare_at_price > product.price %}
                  <span class="text-lg text-gray-500 line-through">
                    {{ product.compare_at_price | money }}
                  </span>
                {% endif %}
              </div>
            </div>

            <!-- Add to Cart Button -->
            <button class="w-full btn-primary group/btn" onclick="addToCart({{ product.variants.first.id }})">
              <svg class="h-5 w-5 mr-2 group-hover/btn:animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"></path>
              </svg>
              Add to Cart
            </button>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- View All Products Button -->
    <div class="text-center mt-12 animate-fade-in">
      <a href="/collections/all" class="btn-secondary">
        View All Products
      </a>
    </div>
  </div>
</section>

<style>
  .featured-products {
    padding: 5rem 0;
    background: #f9fafb;
  }
  
  .featured-products > div {
    max-width: 80rem;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .featured-products h2 {
    font-size: 2.25rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 1rem;
  }
  
  .text-gradient-primary {
    background: linear-gradient(135deg, var(--primary-600) 0%, var(--accent-500) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .featured-products p {
    font-size: 1.25rem;
    color: #6b7280;
    max-width: 48rem;
    margin: 0 auto;
  }
  
  .grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: 2rem;
  }
  
  .card {
    background: white;
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.3s ease;
    transform: translateY(0);
  }
  
  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .card img {
    width: 100%;
    height: 16rem;
    object-fit: cover;
    transition: transform 0.5s ease;
  }
  
  .card:hover img {
    transform: scale(1.1);
  }
  
  .card .p-6 {
    padding: 1.5rem;
  }
  
  .card span.text-sm {
    font-size: 0.875rem;
    color: var(--primary-600);
    font-weight: 500;
  }
  
  .card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.5rem;
    transition: color 0.3s ease;
  }
  
  .card:hover h3 {
    color: var(--primary-600);
  }
  
  .card .flex.items-center.mb-3 {
    display: flex;
    align-items: center;
    margin-bottom: 0.75rem;
  }
  
  .card .flex.items-center.justify-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1rem;
  }
  
  .card .text-2xl {
    font-size: 1.5rem;
    font-weight: 700;
    color: #111827;
  }
  
  .card .text-lg {
    font-size: 1.125rem;
    color: #6b7280;
    text-decoration: line-through;
  }
  
  .btn-primary {
    background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-700) 100%);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    font-weight: 600;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    transition: all 0.3s ease;
    text-decoration: none;
    transform: translateY(0);
    box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.1);
    min-width: 180px;
    min-height: 48px;
    font-size: 1.1rem;
  }
  
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -3px rgba(37, 99, 235, 0.2);
  }
  
  .btn-secondary {
    background: white;
    color: var(--primary-600);
    font-weight: 600;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    border: 2px solid var(--primary-600);
    cursor: pointer;
    transition: all 0.3s ease;
    transform: translateY(0);
    min-width: 180px;
    min-height: 48px;
    font-size: 1.1rem;
    text-decoration: none;
    display: inline-block;
  }
  
  .btn-secondary:hover {
    background: var(--primary-600);
    color: white;
    transform: translateY(-2px);
  }
  
  /* Animation Classes */
  .animate-fade-in {
    animation: fadeIn 0.6s ease-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.6s ease-out;
  }
  
  .animate-bounce {
    animation: bounce 1s infinite;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideUp {
    from { 
      opacity: 0;
      transform: translateY(30px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-10px);
    }
    60% {
      transform: translateY(-5px);
    }
  }
  
  @media (min-width: 768px) {
    .featured-products h2 {
      font-size: 3rem;
    }
    
    .grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (min-width: 1024px) {
    .grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection to display"
    },
    {
      "type": "range",
      "id": "product_limit",
      "min": 3,
      "max": 12,
      "step": 3,
      "default": 6,
      "label": "Number of products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}
